<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patro du Val d'Haine de Maurage</title>
    
    <link rel="stylesheet" href="style.css">
    <!-- Ajout de la police Indie Flower -->
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Version 11.3 pour le layout (Dernière version avec Partenaires TXT + Fix Curseur) -->
    <script src="layout.js?v=11.3"></script>

    <script>
        // Ajout de la font 'handwritten' pour Indie Flower
        tailwind.config = { theme: { extend: { colors: { patro: { yellow: '#FFD700', green: '#009045', dark: '#1a1a1a', light: '#f8fafc' } }, fontFamily: { sans: ['Poppins', 'sans-serif'], display: ['Fredoka', 'sans-serif'], handwritten: ['Indie Flower', 'cursive'] } } } }
    </script>
</head>
<body class="font-sans text-slate-800 bg-patro-light antialiased">

    <div id="custom-cursor"></div>
    <div id="loader"><div class="spinner mb-4"></div><p class="text-patro-green font-bold font-display animate-pulse">Chargement...</p></div>
    <div id="navbar-placeholder"></div>

    <!-- Hero Section -->
    <section id="accueil" class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden" style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 144, 69, 0.7)), url('donnees-site/photos-site-accueil/banniere_accueil.jpg'); background-size: cover; background-position: center;">
        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            
            <!-- Texte Bienvenue style manuscrit et incliné -->
            <div class="mb-8 transform -rotate-3 origin-center inline-block">
                <span class="font-handwritten text-3xl md:text-5xl text-patro-yellow font-bold drop-shadow-md tracking-wide">
                    Bienvenue au Patro du Val d'Haine
                </span>
            </div>

            <h1 class="text-4xl md:text-6xl lg:text-7xl font-display font-extrabold text-white mb-6 leading-tight drop-shadow-sm">
                L'aventure commence <br class="hidden md:block" />
                <span class="text-patro-yellow">avec toi !</span>
            </h1>
            <p class="mt-4 max-w-2xl mx-auto text-xl text-green-50 md:text-2xl font-light">
                Le Patro du Val d'Haine est un mouvement de jeunesse ouvert à tous à partir de 4 ans !
            </p>
            
            <!-- BOUTONS D'ACTION -->
            <div class="mt-10 flex flex-col sm:flex-row justify-center gap-4">
                <!-- Bouton Inscription -->
                <a href="inscription.html" class="px-8 py-4 rounded-full bg-patro-yellow text-patro-green font-bold text-lg shadow-lg hover:bg-yellow-400 hover:scale-105 transition transform duration-200 flex items-center justify-center gap-2">
                    <i data-lucide="user-plus" class="w-5 h-5"></i>
                    Je m'inscris
                </a>
                
                <!-- NOUVEAU BOUTON : Devenir Animateur -->
                <a href="recrutement.html" class="px-8 py-4 rounded-full bg-white text-patro-green font-bold text-lg shadow-lg hover:bg-gray-100 hover:scale-105 transition transform duration-200 flex items-center justify-center gap-2">
                    <i data-lucide="sparkles" class="w-5 h-5"></i>
                    Devenir animateur
                </a>
            </div>

        </div>
        <div class="absolute bottom-0 w-full leading-none z-10">
            <svg class="block w-full h-12 md:h-24 text-patro-light" viewBox="0 0 1440 320" preserveAspectRatio="none">
                <path class="wave-anim-2" fill="currentColor" d="M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,261.3C960,256,1056,224,1152,202.7C1248,181,1344,171,1392,165.3L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
                <path class="wave-anim-1" fill="currentColor" fill-opacity="1" d="M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,261.3C960,256,1056,224,1152,202.7C1248,181,1344,171,1392,165.3L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
            </svg>
        </div>
    </section>

    <!-- Raccourcis Rapides -->
    <section class="py-12 bg-patro-light relative z-20 -mt-6 md:-mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                
                <!-- Espace Parents -->
                <a href="https://manager.patrovaldhaine.be/app/parent/" target="_blank" class="group flex flex-col items-center text-center">
                    <div class="w-full aspect-square overflow-hidden rounded-2xl shadow-lg mb-4 relative border-4 border-white group-hover:-translate-y-2 transition duration-300">
                        <div class="absolute inset-0 bg-black/10 group-hover:bg-black/0 transition z-10"></div>
                        <img src="donnees-site/photos-site-accueil/espace-parent.png" 
                             alt="Espace Parents" 
                             class="w-full h-full object-cover transform group-hover:scale-110 transition duration-700"
                             onerror="this.src='https://placehold.co/600x600?text=Image+Manquante';">
                        <div class="absolute bottom-2 right-2 bg-white p-1.5 rounded-full text-patro-green z-20 shadow-sm">
                            <i data-lucide="users" class="w-5 h-5"></i>
                        </div>
                    </div>
                    <h3 class="text-lg md:text-xl font-display font-bold text-gray-800 group-hover:text-patro-green transition">Espace parents</h3>
                </a>

                <!-- Documents -->
                <a href="documents.html" class="group flex flex-col items-center text-center">
                    <div class="w-full aspect-square overflow-hidden rounded-2xl shadow-lg mb-4 relative border-4 border-white group-hover:-translate-y-2 transition duration-300">
                        <div class="absolute inset-0 bg-black/10 group-hover:bg-black/0 transition z-10"></div>
                        <img src="donnees-site/photos-site-accueil/documents.png" 
                             alt="Documents" 
                             class="w-full h-full object-cover transform group-hover:scale-110 transition duration-700"
                             onerror="this.src='https://placehold.co/600x600?text=Image+Manquante';">
                        <div class="absolute bottom-2 right-2 bg-white p-1.5 rounded-full text-patro-green z-20 shadow-sm">
                            <i data-lucide="file-text" class="w-5 h-5"></i>
                        </div>
                    </div>
                    <h3 class="text-lg md:text-xl font-display font-bold text-gray-800 group-hover:text-patro-green transition">Documents</h3>
                </a>

                <!-- Contactez-nous -->
                <a href="contact.html" class="group flex flex-col items-center text-center">
                    <div class="w-full aspect-square overflow-hidden rounded-2xl shadow-lg mb-4 relative border-4 border-white group-hover:-translate-y-2 transition duration-300">
                        <div class="absolute inset-0 bg-black/10 group-hover:bg-black/0 transition z-10"></div>
                        <img src="donnees-site/photos-site-accueil/contact.png" 
                             alt="Contact" 
                             class="w-full h-full object-cover transform group-hover:scale-110 transition duration-700"
                             onerror="this.src='https://placehold.co/600x600?text=Image+Manquante';">
                        <div class="absolute bottom-2 right-2 bg-white p-1.5 rounded-full text-patro-green z-20 shadow-sm">
                            <i data-lucide="mail" class="w-5 h-5"></i>
                        </div>
                    </div>
                    <h3 class="text-lg md:text-xl font-display font-bold text-gray-800 group-hover:text-patro-green transition">Contactez-nous</h3>
                </a>

                <!-- Infos Pratiques & Agenda -->
                <a href="#infos" class="group flex flex-col items-center text-center">
                    <div class="w-full aspect-square overflow-hidden rounded-2xl shadow-lg mb-4 relative border-4 border-white group-hover:-translate-y-2 transition duration-300">
                        <div class="absolute inset-0 bg-black/10 group-hover:bg-black/0 transition z-10"></div>
                        <img src="donnees-site/photos-site-accueil/infos-pratiques.png" 
                             alt="Infos Pratiques" 
                             class="w-full h-full object-cover transform group-hover:scale-110 transition duration-700"
                             onerror="this.src='https://placehold.co/600x600?text=Image+Manquante';">
                        <div class="absolute bottom-2 right-2 bg-white p-1.5 rounded-full text-patro-green z-20 shadow-sm">
                            <i data-lucide="calendar" class="w-5 h-5"></i>
                        </div>
                    </div>
                    <h3 class="text-lg md:text-xl font-display font-bold text-gray-800 group-hover:text-patro-green transition">Infos pratiques & agenda</h3>
                </a>

            </div>
        </div>
    </section>

    <!-- Presentation Textes Officiels (Version Dynamique) -->
    <section class="py-20 bg-patro-light overflow-hidden">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-patro-green font-bold tracking-wide uppercase text-sm mb-2">Qui sommes-nous ?</h2>
                <h3 class="text-3xl md:text-5xl font-display font-bold text-gray-900">Le Patro, en deux-trois mots</h3>
            </div>

            <div class="space-y-12">
                <!-- Bloc 1: Ouvert à tous (Légèrement penché gauche) -->
                <div class="bg-white rounded-3xl shadow-lg p-8 md:p-10 transform -rotate-1 hover:rotate-0 transition duration-300 border-l-8 border-patro-yellow">
                    <h4 class="text-2xl md:text-3xl font-display font-bold text-patro-yellow mb-4">Ouvert à tous</h4>
                    <div class="text-gray-600 text-lg leading-relaxed">
                        <p class="mb-4">Le Patro, c'est un <strong>mouvement de jeunesse</strong> ouvert à <strong>tous à partir de 4 ans</strong> !</p>
                        <p>Selon l'âge, les patronnés passent de section en section :</p>
                        <ul class="mt-2 space-y-1 font-medium text-gray-500">
                            <li>• Poussins (4/6 ans)</li>
                            <li>• Benjamins (6/9 ans)</li>
                            <li>• Chevaliers / Étincelles (9/12 ans)</li>
                            <li>• Conquérants / Alpines (12/14 ans)</li>
                            <li>• Aventuriers (14/16 ans)</li>
                            <li class="text-patro-green">• & finalement les animateurs à partir de 16 ans !</li>
                        </ul>
                    </div>
                </div>

                <!-- Bloc 2: Par les jeunes (Légèrement penché droite) -->
                <div class="bg-white rounded-3xl shadow-lg p-8 md:p-10 transform rotate-1 hover:rotate-0 transition duration-300 border-r-8 border-patro-green ml-auto md:w-11/12">
                    <h4 class="text-2xl md:text-3xl font-display font-bold text-patro-green mb-4">Par les jeunes, pour les jeunes !</h4>
                    <div class="text-gray-600 text-lg leading-relaxed">
                        <p class="mb-4">Enfants comme animateurs, <strong>chacun occupe une place importante</strong> au sein du Patro !</p>
                        <p>Les animateurs, qui ont eux-mêmes été animés, transmettent la joie et l'amusement comme ils ont acquises lors de leurs années en tant qu'animé. Ainsi, <strong>animés et animateurs découvrent, imaginent et créent ensemble le Patro de demain</strong> ! Tout en s'amusant, les uns comme les autres <em>(c'est de là que vient notre slogan "Car l'aventure commence avec toi!")</em></p>
                    </div>
                </div>

                <!-- Bloc 3: S'amuser (Légèrement penché gauche) -->
                <div class="bg-white rounded-3xl shadow-lg p-8 md:p-10 transform -rotate-1 hover:rotate-0 transition duration-300 border-l-8 border-patro-yellow">
                    <h4 class="text-2xl md:text-3xl font-display font-bold text-patro-yellow mb-4">S'amuser, rêver & kiffer</h4>
                    <div class="text-gray-600 text-lg leading-relaxed">
                        <p class="mb-4">Au Patro on s'amuse, mais pas que...</p>
                        <p class="mb-4">Venir au Patro, c'est <strong>découvrir plein de choses, repousser ses limites, réaliser ses rêves</strong>. Tout ça dans <strong>d'incroyables cadres</strong>, surtout au camp... Le jour mais aussi la nuit.</p>
                        <p><strong>C'est vraiment possible</strong>, on le vit chaque dimanche, à chaque camp et à chaque hike, <strong>alors pourquoi pas toi?</strong></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sections (Age Groups) -->
    <section id="sections" class="py-20 bg-white relative">
        <div class="absolute top-0 w-full h-24 bg-gradient-to-b from-patro-light to-white"></div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
            <div class="text-center mb-16">
                <h2 class="text-patro-green font-bold tracking-wide uppercase text-sm mb-2">Les sections</h2>
                <h3 class="text-3xl md:text-4xl font-display font-bold text-gray-900">Selon l'âge...</h3>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Poussins -->
                <div class="group relative overflow-hidden rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 bg-yellow-50 border border-yellow-100 p-8 text-center">
                    <div class="w-16 h-16 mx-auto bg-yellow-400 rounded-full flex items-center justify-center text-white mb-4"><i data-lucide="baby" class="w-8 h-8"></i></div>
                    <h4 class="text-2xl font-display font-bold text-gray-800 mb-2">Poussins</h4>
                    <span class="inline-block px-3 py-1 bg-yellow-400 text-white text-xs font-bold rounded-full mb-4">4 - 6 ANS</span>
                </div>
                <!-- Benjamins -->
                <div class="group relative overflow-hidden rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 bg-orange-50 border border-orange-100 p-8 text-center">
                    <div class="w-16 h-16 mx-auto bg-orange-500 rounded-full flex items-center justify-center text-white mb-4"><i data-lucide="sun" class="w-8 h-8"></i></div>
                    <h4 class="text-2xl font-display font-bold text-gray-800 mb-2">Benjamins</h4>
                    <span class="inline-block px-3 py-1 bg-orange-500 text-white text-xs font-bold rounded-full mb-4">6 - 9 ANS</span>
                </div>
                <!-- Chevaliers -->
                <div class="group relative overflow-hidden rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 bg-red-50 border border-red-100 p-8 text-center">
                    <div class="w-16 h-16 mx-auto bg-red-500 rounded-full flex items-center justify-center text-white mb-4"><i data-lucide="flame" class="w-8 h-8"></i></div>
                    <h4 class="text-2xl font-display font-bold text-gray-800 mb-2">Chevaliers / Étincelles</h4>
                    <span class="inline-block px-3 py-1 bg-red-500 text-white text-xs font-bold rounded-full mb-4">9 - 12 ANS</span>
                </div>
                <!-- Conquérants -->
                <div class="group relative overflow-hidden rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 bg-blue-50 border border-blue-100 p-8 text-center">
                    <div class="w-16 h-16 mx-auto bg-blue-500 rounded-full flex items-center justify-center text-white mb-4"><i data-lucide="mountain" class="w-8 h-8"></i></div>
                    <h4 class="text-2xl font-display font-bold text-gray-800 mb-2">Conquérants / Alpines</h4>
                    <span class="inline-block px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full mb-4">12 - 14 ANS</span>
                </div>
                <!-- Aventuriers -->
                <div class="group relative overflow-hidden rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 bg-green-50 border border-green-100 p-8 text-center">
                    <div class="w-16 h-16 mx-auto bg-green-600 rounded-full flex items-center justify-center text-white mb-4"><i data-lucide="compass" class="w-8 h-8"></i></div>
                    <h4 class="text-2xl font-display font-bold text-gray-800 mb-2">Aventuriers</h4>
                    <span class="inline-block px-3 py-1 bg-green-600 text-white text-xs font-bold rounded-full mb-4">14 - 16 ANS</span>
                </div>
                <!-- Animateurs -->
                <div class="group relative overflow-hidden rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 bg-gray-800 text-white p-8 text-center">
                    <div class="w-16 h-16 mx-auto bg-white/20 rounded-full flex items-center justify-center text-patro-yellow mb-4"><i data-lucide="star" class="w-8 h-8"></i></div>
                    <h4 class="text-2xl font-display font-bold text-white mb-2">Animateurs</h4>
                    <span class="inline-block px-3 py-1 bg-patro-yellow text-gray-900 text-xs font-bold rounded-full mb-4">16+ ANS</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Infos Pratiques & Calendar -->
    <section id="infos" class="py-20 bg-patro-light relative">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
                
                <!-- Colonne Gauche : Infos Pratiques -->
                <div class="lg:sticky lg:top-28">
                    <h2 class="text-patro-green font-bold tracking-wide uppercase text-sm mb-2">En Pratique</h2>
                    <h3 class="text-3xl md:text-4xl font-display font-bold text-gray-900 mb-6">C'est où & quand ?</h3>
                    
                    <div class="space-y-6">
                        <div class="flex items-start gap-4">
                            <div class="bg-white p-3 rounded-lg shadow-sm text-patro-green">
                                <i data-lucide="clock" class="w-6 h-6"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-lg text-gray-800">Le Dimanche</h4>
                                <p class="text-gray-600">De 14h00 à 18h00</p>
                                <p class="text-sm text-gray-500 italic mt-1">Vérifiez toujours le calendrier ci-contre !</p>
                            </div>
                        </div>

                        <div class="flex items-start gap-4">
                            <div class="bg-white p-3 rounded-lg shadow-sm text-patro-green">
                                <i data-lucide="map-pin" class="w-6 h-6"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-lg text-gray-800">Le Local</h4>
                                <p class="text-gray-600">École Libre de Maurage "L'Étincelle"</p>
                                <p class="text-gray-600">Rue du Roeulx 23, 7110 Maurage</p>
                            </div>
                        </div>

                        <div class="flex items-start gap-4">
                            <div class="bg-white p-3 rounded-lg shadow-sm text-patro-green">
                                <i data-lucide="calendar-days" class="w-6 h-6"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-lg text-gray-800">Calendrier</h4>
                                <p class="text-gray-600 mb-2">Retrouvez toutes nos dates importantes ci-contre.</p>
                                <a href="informations.html" class="text-sm text-patro-green font-bold hover:underline">Voir toutes les infos & valves →</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Colonne Droite : Météo & Calendrier Dynamique -->
                <div class="space-y-6">
                    
                    <!-- NOUVEAU : BLOC MÉTÉO DU DIMANCHE -->
                    <div class="bg-gradient-to-br from-cyan-50 to-white rounded-2xl shadow-xl border border-cyan-100 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-display font-bold text-xl text-cyan-900 flex items-center gap-2">
                                <i data-lucide="cloud-sun" class="w-6 h-6 text-cyan-600"></i> Météo Maurage
                            </h4>
                            <div id="weather-loader" class="animate-spin rounded-full h-5 w-5 border-b-2 border-cyan-600"></div>
                        </div>
                        
                        <div id="weather-content" class="hidden">
                            <!-- Le contenu sera injecté ici par JS -->
                        </div>
                        
                        <div id="weather-error" class="hidden text-sm text-red-400 italic">Météo indisponible</div>
                    </div>

                    <!-- BLOC CALENDRIER -->
                    <div class="bg-white rounded-2xl shadow-xl border-4 border-white p-6 min-h-[300px]">
                        <h4 class="font-display font-bold text-2xl text-gray-800 mb-6 border-b pb-2">Prochaines dates</h4>
                        
                        <!-- Container où les événements seront injectés -->
                        <div id="home-calendar-container" class="space-y-3">
                            <!-- Loader -->
                            <div class="flex flex-col items-center justify-center py-12 text-gray-400">
                                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-patro-green mb-2"></div>
                                <p>Chargement du calendrier...</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <div id="footer-placeholder"></div>

    <!-- SCRIPT CALENDRIER & MÉTÉO -->
    <script>
        // --- CONFIGURATION MÉTÉO ---
        async function loadSundayWeather() {
            try {
                // Lat: 50.4565, Long: 4.097, Timezone: Europe/Berlin
                const url = "https://api.open-meteo.com/v1/forecast?latitude=50.4565&longitude=4.097&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max&timezone=Europe%2FBerlin";
                const response = await fetch(url);
                if (!response.ok) throw new Error('API Error');
                const data = await response.json();
                
                const container = document.getElementById('weather-content');
                const days = data.daily.time;
                const maxs = data.daily.temperature_2m_max;
                const mins = data.daily.temperature_2m_min;
                const rains = data.daily.precipitation_probability_max;
                const codes = data.daily.weathercode;
                
                // Trouver le prochain dimanche
                let sundayIndex = -1;
                const targetDay = 0; // 0 = Dimanche
                
                for(let i=0; i<days.length; i++) {
                    const d = new Date(days[i]);
                    if (d.getDay() === targetDay) {
                        sundayIndex = i;
                        break;
                    }
                }

                if (sundayIndex !== -1) {
                    const dateObj = new Date(days[sundayIndex]);
                    const dayStr = dateObj.toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long' });
                    
                    const code = codes[sundayIndex];
                    const maxTemp = Math.round(maxs[sundayIndex]);
                    const minTemp = Math.round(mins[sundayIndex]);
                    const rainProb = rains[sundayIndex];

                    let icon = 'cloud'; let color = 'text-gray-400'; let desc = 'Nuageux';
                    let adviceIcon = 'shirt';
                    let adviceText = 'Uniforme impeccable (Chemise & Foulard)';

                    // Logique Icone
                    if (code <= 3) { icon = 'sun'; color = 'text-yellow-400'; desc = 'Ensoleillé'; }
                    else if (code >= 51 && code <= 67) { icon = 'cloud-drizzle'; color = 'text-blue-300'; desc = 'Bruine'; }
                    else if (code >= 71) { icon = 'snowflake'; color = 'text-blue-200'; desc = 'Neige'; }
                    else if (code >= 95) { icon = 'cloud-lightning'; color = 'text-gray-600'; desc = 'Orage'; }
                    else if (code >= 80) { icon = 'cloud-rain'; color = 'text-blue-500'; desc = 'Averses'; }
                    else if (code >= 45) { icon = 'cloud-fog'; color = 'text-gray-300'; desc = 'Brouillard'; }

                    // Logique Conseil
                    if (rainProb > 40 || (code >= 51 && code <= 67) || (code >= 80)) {
                        adviceIcon = 'umbrella';
                        adviceText = "K-Way imperméable & chaussures impérméable (idéalement) ;)";
                    } else if (code >= 71) {
                        adviceIcon = 'snowflake';
                        adviceText = "Gros manteau, gants, bonnet & bottes";
                    } else if (maxTemp > 25) {
                        adviceIcon = 'sun';
                        adviceText = "Casquette, crème solaire & gourde d'eau";
                    } else if (maxTemp < 8) {
                        adviceIcon = 'thermometer-snowflake';
                        adviceText = "Habillez-les très chaudement (Gants/Bonnet).";
                    } else if (maxTemp < 15) {
                        adviceIcon = 'shirt';
                        adviceText = "Petit pull recommandé.";
                    }

                    container.innerHTML = `
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center gap-4">
                                <i data-lucide="${icon}" class="w-12 h-12 ${color}"></i>
                                <div>
                                    <span class="block text-xs font-bold text-gray-400 uppercase tracking-wider">${dayStr}</span>
                                    <div class="text-2xl font-black text-cyan-800 leading-none">
                                        ${maxTemp}° <span class="text-sm font-normal text-gray-500">/ ${minTemp}°</span>
                                    </div>
                                    <div class="text-sm font-semibold text-gray-600 flex items-center gap-2">
                                        ${desc} <span class="text-blue-500 text-xs bg-blue-50 px-1.5 py-0.5 rounded"><i data-lucide="umbrella" class="w-3 h-3 inline"></i> ${rainProb}%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3 bg-white/60 rounded-lg p-2 text-sm text-cyan-800 font-medium flex items-center gap-2 border border-cyan-100">
                            <i data-lucide="${adviceIcon}" class="w-4 h-4 text-cyan-600"></i> ${adviceText}
                        </div>
                    `;
                    
                    document.getElementById('weather-loader').style.display = 'none';
                    container.classList.remove('hidden');
                    lucide.createIcons();
                } else {
                    throw new Error('Dimanche introuvable');
                }
                
            } catch (e) {
                document.getElementById('weather-loader').style.display = 'none';
                document.getElementById('weather-error').classList.remove('hidden');
            }
        }

        // --- CONFIGURATION CALENDRIER ---
        const repoOwner = 'staffpatrovdh-pixel'; 
        const repoName = 'staffpatrovdh-pixel.github.io';
        const branch = 'main'; 
        const calendarUrl = `https://raw.githubusercontent.com/${repoOwner}/${repoName}/${branch}/donnees-site/calendrier.txt?t=${Date.now()}`;

        const monthMap = {
            '01': 'Janv', '02': 'Fév', '03': 'Mars', '04': 'Avr', '05': 'Mai', '06': 'Juin',
            '07': 'Juil', '08': 'Août', '09': 'Sept', '10': 'Oct', '11': 'Nov', '12': 'Déc'
        };

        document.addEventListener('DOMContentLoaded', async () => {
            loadSundayWeather(); // Lancer la météo

            try {
                const response = await fetch(calendarUrl);
                if (!response.ok) throw new Error("Calendrier introuvable");
                const text = await response.text();
                
                const container = document.getElementById('home-calendar-container');
                container.innerHTML = '';

                const lines = text.split('\n');
                let hasEvents = false;
                let count = 0;
                const maxEvents = 10;

                lines.forEach(line => {
                    if (!line.trim() || count >= maxEvents) return;

                    const parts = line.split('|');
                    if (parts.length >= 2) {
                        hasEvents = true;
                        const dateRaw = parts[0].trim(); 
                        const title = parts[1].trim();
                        const place = parts[2] ? parts[2].trim() : '';
                        const linkUrl = parts[3] ? parts[3].trim() : '';

                        const dateParts = dateRaw.split('/');
                        const day = dateParts[0];
                        const monthNum = dateParts[1];
                        const monthName = monthMap[monthNum] || monthNum;

                        const innerContent = `
                                <div class="flex-shrink-0 bg-patro-yellow/20 text-patro-dark rounded-lg w-14 h-14 flex flex-col items-center justify-center border border-patro-yellow/30">
                                    <span class="text-lg font-bold leading-none">${day}</span>
                                    <span class="text-xs uppercase font-bold leading-none mt-1">${monthName}</span>
                                </div>
                                <div class="flex-grow">
                                    <h5 class="font-bold text-gray-800 group-hover:text-patro-green transition">${title}</h5>
                                    ${place ? `<p class="text-xs text-gray-500 flex items-center gap-1"><i data-lucide="map-pin" class="w-3 h-3"></i> ${place}</p>` : ''}
                                </div>
                        `;

                        const commonClasses = "flex items-center gap-4 p-3 hover:bg-gray-50 rounded-lg transition group block w-full text-left";
                        let html = '';

                        if (linkUrl) {
                            html = `<a href="${linkUrl}" class="${commonClasses} cursor-pointer decoration-0">${innerContent}</a>`;
                        } else {
                            html = `<div class="${commonClasses}">${innerContent}</div>`;
                        }

                        container.innerHTML += html;
                        count++;
                    }
                });

                if (!hasEvents) {
                    container.innerHTML = '<p class="text-gray-500 italic text-center py-4">Aucune date prévue pour le moment.</p>';
                }
                if(typeof lucide !== 'undefined') lucide.createIcons();

            } catch (error) {
                console.error(error);
                document.getElementById('home-calendar-container').innerHTML = '<p class="text-red-400 text-sm text-center">Erreur de chargement.</p>';
            }
        });
    </script>
</body>
</html>
